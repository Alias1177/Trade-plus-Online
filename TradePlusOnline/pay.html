<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Trader Plus - IT Solutions | Professional Trading Education</title>
    <meta name="description" content="Professional trading education and AI-powered market analysis tools. Master institutional trading strategies with our comprehensive course and automated assistant.">
    <meta name="keywords" content="trading course, trading bot, institutional trading, professional education, market analysis, AI trading assistant">
    <link rel="icon" href="./assets/logowhite.png" type="image/png">

    <!-- Optimized CSS Loading -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

    <style>
        * {
            font-family: 'Inter', sans-serif;
            box-sizing: border-box;
        }
        html {
            scroll-behavior: smooth;
        }
        body {
            overflow-x: hidden;
        }
        .gradient-text {
            background: linear-gradient(135deg, #10B981, #059669);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .pulse-glow {
            animation: pulse-glow 2s infinite;
        }
        @keyframes pulse-glow {
            0%, 100% {
                box-shadow: 0 0 20px rgba(16, 185, 129, 0.5);
            }
            50% {
                box-shadow: 0 0 40px rgba(16, 185, 129, 0.8);
            }
        }
        .floating {
            animation: floating 3s ease-in-out infinite;
        }
        @keyframes floating {
            0%, 100% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-10px);
            }
        }
        .slide-in {
            animation: slideIn 0.8s ease-out;
        }
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .progress-bar {
            width: 0%;
            transition: width 0.3s ease;
        }
        .fade-in {
            animation: fadeIn 1s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        /* Loading optimization */
        img {
            loading: lazy;
        }
        /* Responsive improvements */
        @media (max-width: 768px) {
            .floating {
                animation: none;
            }
        }
        /* Form validation styles */
        .error {
            border-color: #ef4444 !important;
        }
        .success {
            border-color: #10b981 !important;
        }
        .error-message {
            color: #ef4444;
            font-size: 0.75rem;
            margin-top: 0.25rem;
        }
        .success-message {
            color: #10b981;
            font-size: 0.75rem;
            margin-top: 0.25rem;
        }
        .email-validation-icon {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            pointer-events: none;
        }
    </style>
    <script>
      gtag('event', 'view_payment_page', {
        'send_to': 'AW-17146158339/Xc9tCL2r6o4YZKH9qOEp'
      });
    </script>
    <!-- Meta Pixel Code -->
    <script>
      !function(f,b,e,v,n,t,s)
      {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
      n.callMethod.apply(n,arguments):n.queue.push(arguments)};
      if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
      n.queue=[];t=b.createElement(e);t.async=!0;
      t.src=v;s=b.getElementsByTagName(e)[0];
      s.parentNode.insertBefore(t,s)}(window, document,'script',
      'https://connect.facebook.net/en_US/fbevents.js');
      fbq('init', '4219783541602820'); 
      fbq('track', 'PageView');
      fbq('track', 'ViewContent', {
        content_name: 'Payment Page'
      });
    </script>
    <noscript>
      <img height="1" width="1" style="display:none"
           src="https://www.facebook.com/tr?id=4219783541602820&ev=PageView&noscript=1"/>
    </noscript>
    <!-- End Meta Pixel Code -->
    <!-- Global site tag (gtag.js) - Google Ads -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=AW-17146158339"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'AW-17146158339');
    </script>
</head>

<body class="bg-gradient-to-br from-gray-900 via-gray-800 to-green-900 text-white min-h-screen">

<!-- Header -->
<header class="pt-8 pb-8 px-4 md:px-12">
    <div class="max-w-6xl mx-auto flex items-center justify-between">
        <div class="flex items-center space-x-4">
            <a href="./index.html" class="hover:opacity-80 transition-opacity">
                <img src="./assets/logowhite.png" alt="Trader Plus Logo" class="h-12 w-12 floating" loading="eager">
            </a>
            <div>
                <h1 class="text-xl md:text-2xl font-black gradient-text">TRADER PLUS</h1>
                <p class="text-xs text-gray-300">IT Solutions</p>
            </div>
        </div>

        <!-- Progress Indicator -->
        <div class="hidden md:flex items-center space-x-4 text-sm">
            <div class="flex items-center space-x-2">
                <div class="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center">
                    <i class="fas fa-check text-white text-xs" aria-hidden="true"></i>
                </div>
                <span>Package Selected</span>
            </div>
            <div class="w-8 h-1 bg-green-500 rounded"></div>
                            <div class="flex items-center space-x-2">
                    <div class="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center">
                        <span class="text-white text-xs font-bold">2</span>
                    </div>
                    <span>Order Details</span>
                </div>
            <div class="w-8 h-1 bg-gray-600 rounded"></div>
            <div class="flex items-center space-x-2">
                <div class="w-8 h-8 bg-gray-600 rounded-full flex items-center justify-center">
                    <span class="text-gray-400 text-xs font-bold">3</span>
                </div>
                <span class="text-gray-400">Confirmation</span>
            </div>
        </div>
    </div>
</header>

<!-- Countdown Timer (static, не фиксированный) -->
<div class="w-full bg-gradient-to-r from-blue-700 via-blue-500 to-blue-700 h-[40px] flex items-center justify-center shadow-md">
    <i class="fas fa-clock text-white mr-2 text-sm"></i>
                    <span class="text-white text-sm md:text-base font-semibold mr-2">Time left for <span class="text-red-600 font-bold">SALE 70%</span> after free access:</span>
    <span class="font-bold text-white text-base md:text-lg tracking-widest" id="mainCountdown">24:00:00</span>
                </div>
<div style="height:0;"></div> <!-- Spacer больше не нужен -->

<!-- Why Trader Plus Benefits Section -->
<div class="bg-gradient-to-r from-blue-900/30 to-green-900/30 border border-blue-500/30 rounded-2xl p-8 mb-8">
    <div class="text-center mb-6">
        <h2 class="text-3xl font-bold text-white mb-2">💡 Why Trader Plus?</h2>
        <p class="text-gray-300">Professional AI trading solutions trusted by 500+ institutional traders</p>
    </div>
    
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <div class="flex items-start space-x-4">
            <div class="w-12 h-12 bg-blue-500/20 rounded-full flex items-center justify-center flex-shrink-0">
                <i class="fas fa-robot text-blue-400 text-xl"></i>
            </div>
            <div>
                <h3 class="font-bold text-white mb-1">24/7 AI Bot Access</h3>
                <p class="text-sm text-gray-300">Round-the-clock automated trading signals and market analysis</p>
            </div>
        </div>
        
        <div class="flex items-start space-x-4">
            <div class="w-12 h-12 bg-green-500/20 rounded-full flex items-center justify-center flex-shrink-0">
                <i class="fas fa-chart-line text-green-400 text-xl"></i>
            </div>
            <div>
                <h3 class="font-bold text-white mb-1">99.9% Signal Accuracy</h3>
                <p class="text-sm text-gray-300">Advanced AI algorithms with proven track record</p>
            </div>
        </div>
        
        <div class="flex items-start space-x-4">
            <div class="w-12 h-12 bg-purple-500/20 rounded-full flex items-center justify-center flex-shrink-0">
                <i class="fas fa-brain text-purple-400 text-xl"></i>
            </div>
            <div>
                <h3 class="font-bold text-white mb-1">Built-in SMC Logic</h3>
                <p class="text-sm text-gray-300">Smart Money Concepts integrated into every signal</p>
            </div>
        </div>
        
        <div class="flex items-start space-x-4">
            <div class="w-12 h-12 bg-yellow-500/20 rounded-full flex items-center justify-center flex-shrink-0">
                <i class="fas fa-shield-alt text-yellow-400 text-xl"></i>
            </div>
            <div>
                <h3 class="font-bold text-white mb-1">No Risk — Test First</h3>
                <p class="text-sm text-gray-300">Try our signals for free before committing</p>
            </div>
        </div>
        
        <div class="flex items-start space-x-4">
            <div class="w-12 h-12 bg-red-500/20 rounded-full flex items-center justify-center flex-shrink-0">
                <i class="fas fa-globe text-red-400 text-xl"></i>
            </div>
            <div>
                <h3 class="font-bold text-white mb-1">5 Languages Support</h3>
                <p class="text-sm text-gray-300">Available in English, Spanish, French, German, Russian</p>
            </div>
        </div>
        
        <div class="flex items-start space-x-4">
            <div class="w-12 h-12 bg-indigo-500/20 rounded-full flex items-center justify-center flex-shrink-0">
                <i class="fas fa-building text-indigo-400 text-xl"></i>
            </div>
            <div>
                <h3 class="font-bold text-white mb-1">SEC Compliant</h3>
                <p class="text-sm text-gray-300">Regulated by Wyoming FinTech standards</p>
            </div>
        </div>
    </div>
</div>

<div class="max-w-7xl mx-auto px-4 md:px-12 pb-12">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">

        <!-- Left Section - Package Details -->
        <div class="space-y-8">


            <!-- Package Selection -->
            <div class="bg-gray-800/50 backdrop-blur-sm rounded-2xl p-6 border border-gray-700">
                <h2 class="text-2xl font-bold mb-6 text-center">Choose Your Learning Path</h2>

                <div class="space-y-4">
                    <!-- Other Services Package -->
                    <div class="package-option border-2 border-gray-600 rounded-xl p-4 cursor-pointer transition-all duration-300 hover:border-green-500" data-package="Id1">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-4">
                                <input type="radio" name="package" value="Id1" class="w-5 h-5 text-green-500">
                                <div>
                                    <h3 class="font-bold">Other Services</h3>
                                    <p class="text-sm text-gray-400">Additional IT solutions and tools</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="text-xl font-bold text-green-400">Get Access</div>
                            </div>
                        </div>
                    </div>

                    <!-- Trading Course Package -->
                    <div class="package-option border-2 border-gray-600 rounded-xl p-4 cursor-pointer transition-all duration-300 hover:border-green-500" data-package="Id2">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-4">
                                <input type="radio" name="package" value="Id2" class="w-5 h-5 text-green-500">
                                <div>
                                    <h3 class="font-bold">Trading Course</h3>
                                    <p class="text-sm text-gray-400">Professional Education</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="text-xl font-bold text-green-400">Get Course Access</div>
                            </div>
                        </div>
                    </div>

                    <!-- AI Trading Bot Package (Recommended) -->
                    <div class="package-option border-2 border-yellow-500 bg-gradient-to-r from-green-900/30 to-yellow-900/30 rounded-xl p-4 cursor-pointer transition-all duration-300 relative" data-package="Id3">
                        <div class="absolute -top-2 left-4 bg-yellow-500 text-black text-xs font-bold px-3 py-1 rounded-full">
                            RECOMMENDED
                        </div>
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-4">
                                <input type="radio" name="package" value="Id3" class="w-5 h-5 text-yellow-500" checked>
                                <div>
                                    <h3 class="font-bold text-yellow-400">AI Trading Bot</h3>
                                    <p class="text-sm text-gray-300">Automated Assistant</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="text-2xl font-bold text-yellow-400">GET ACCESS</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- What's Included -->
            <div class="bg-gray-800/50 backdrop-blur-sm rounded-2xl p-6 border border-gray-700">
                <h3 class="text-xl font-bold mb-4">What's Included:</h3>
                <div id="package-features" class="space-y-3">
                    <!-- Features will be populated by JavaScript -->
                </div>
            </div>

            <!-- User Stats -->
            <div class="bg-gray-800/50 backdrop-blur-sm rounded-2xl p-6 border border-gray-700">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-bold">User Statistics</h3>
                    <div class="flex text-yellow-400">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-4 text-center">
                    <div>
                        <div class="text-2xl font-bold text-green-400 counter" data-target="500">0</div>
                        <p class="text-sm text-gray-400">Active Users</p>
                    </div>
                    <div>
                        <div class="text-2xl font-bold text-green-400">4.9/5</div>
                        <p class="text-sm text-gray-400">Star Rating</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Section - Pre-Order Form -->
        <div class="bg-gray-800/50 backdrop-blur-sm rounded-2xl p-8 border border-gray-700 h-fit">
            <div class="text-center mb-6">
                <h2 class="text-3xl font-bold mb-2">Get Professional Access</h2>
                <p class="text-gray-300">Join 500+ active users of our professional tools!</p>
            </div>

            <form id="preOrderForm" class="space-y-6">
                <!-- Order Summary -->
                <div class="bg-green-900/30 border border-green-500/30 rounded-lg p-4">
                    <h3 class="font-bold mb-3">Selected Package</h3>
                    <div class="space-y-2">
                        <div class="flex justify-between">
                            <span>Service:</span>
                            <span id="selectedPackage" class="font-bold">AI Trading Bot</span>
                        </div>
                        <div class="text-center text-sm text-green-400 font-semibold mt-4">
                            Professional trading education and tools
                        </div>
                    </div>
                </div>

                <!-- Terms Agreement -->
                <div class="flex items-start space-x-3">
                    <input type="checkbox" id="terms" required class="w-5 h-5 text-green-500 mt-1">
                    <label for="terms" class="text-sm text-gray-300">
                        I agree to the <a href="#" onclick="openPopup('terms')" class="text-green-400 hover:underline">Terms & Conditions</a>
                        and <a href="#" onclick="openPopup('privacy')" class="text-green-400 hover:underline">Privacy Policy</a>.
                        I understand these are digital products and services.
                    </label>
                </div>

                <!-- Submit Button -->
                <button type="button" class="w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-bold py-4 rounded-xl transition-all duration-300 pulse-glow" onclick="handleAccessClick()">
                    <i class="fas fa-lock mr-2"></i>
                    ACTIVATE FREE ACCESS
                </button>
                <div id="termsError" class="text-center text-sm text-red-400 mt-2 hidden">You must agree to the Terms & Conditions and Privacy Policy.</div>

                <div class="text-center text-sm text-gray-400">
                    <i class="fas fa-shield-alt mr-1"></i>
                    Secure checkout • Digital products delivery
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Success Modal -->
<div id="successModal" class="fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 hidden">
    <div class="bg-gray-900 rounded-2xl p-8 max-w-md w-full mx-4 border border-green-500 text-center">
        <div class="w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4">
            <i class="fas fa-check text-white text-2xl"></i>
        </div>
        <h3 class="text-2xl font-bold mb-4 text-green-400">Access Confirmed!</h3>
        <p class="text-gray-300 mb-6">
            🎉 Congratulations! You now have access to professional tools.
        </p>
        
        <!-- Promo Code Section -->
        <div id="promoSection" class="bg-yellow-900/30 border border-yellow-500/30 rounded-lg p-4 mb-4 flex flex-col items-center justify-center text-center">
            <p class="text-sm font-bold text-yellow-400 mb-1">PROMO CODE FOR 24 Hours</p>
            <div class="flex flex-row items-center justify-center">
                <span id="promoCode" class="text-2xl font-bold text-red-500 select-all">FREE24</span>
                <div class="flex flex-col items-center ml-2">
                    <button id="copyPromoBtn" class="p-2 rounded hover:bg-yellow-800 transition mb-1" title="Copy">
                        <i id="copyIcon" class="fas fa-copy text-yellow-300"></i>
                    </button>
                    <span id="copyTooltip" class="text-xs text-green-400 hidden">Copied!</span>
                </div>
            </div>
        </div>
        
        <button id="joinTelegramBtn" class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-lg transition">
            <i class="fab fa-telegram mr-2"></i>
            Join Telegram Bot
        </button>
    </div>
</div>

<!-- Terms/Privacy Popup -->
<div id="popup" class="fixed inset-0 bg-black/80 backdrop-blur-sm flex justify-center items-center hidden z-50">
    <div class="bg-gray-900 rounded-2xl shadow-lg w-3/4 max-w-lg p-6 relative max-h-[80vh] overflow-y-auto border border-gray-700">
        <button class="absolute top-4 right-4 bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition" onclick="closePopup()">×</button>
        <h2 id="popup-title" class="text-2xl font-bold mb-4"></h2>
        <p id="popup-content" class="text-gray-300 leading-relaxed"></p>
    </div>
</div>

<script>
// Package configurations
const packages = {
    Id1: {
        name: "Other Services",
        regularPrice: 0,
        earlyBirdPrice: 0,
        features: [
            "Fit Plan Pro",
            "Happy Meal Matcher",
            "Nootri Plan",
            "Ingredient Finder"
        ]
    },
    Id2: {
        name: "Trading Course",
        regularPrice: 0,
        earlyBirdPrice: 0,
        features: [
            "Complete Trading Course PDF",
            "Institutional Strategies",
            "Risk Management Guide",
            "Live Case Studies"
        ]
    },
    Id3: {
        name: "AI Trading Bot",
        regularPrice: 0,
        earlyBirdPrice: 0,
        features: [
            "24/7 Telegram Trading Bot",
            "AI Trading Bot Access",
            "Real-time Market Updates",
            "Risk Alerts"
        ]
    }
};

let selectedPackage = 'Id3';

// Initialize page
document.addEventListener('DOMContentLoaded', function() {
    updateSpotsLeft();
    animateCounters();
    setupPackageSelection();
    handleURLParameters();
    updateOrderSummary();
    setupFormSubmission();
    initializeCountdown();
    setupPromoCopy();
});

// Handle URL parameters for automatic package selection
function handleURLParameters() {
    const urlParams = new URLSearchParams(window.location.search);
    const packageParam = urlParams.get('package');

    // Mapping старых значений к новым
    const packageMapping = {
        'course': 'Id1',
        'bot': 'Id2',
        'combo': 'Id3',
        // Новые значения остаются как есть
        'Id1': 'Id1',
        'Id2': 'Id2',
        'Id3': 'Id3'
    };

    const mappedPackage = packageMapping[packageParam];

    if (mappedPackage && packages[mappedPackage]) {
        selectedPackage = mappedPackage;

        // Update UI to reflect the selected package
        const packageOptions = document.querySelectorAll('.package-option');
        packageOptions.forEach(option => {
            option.classList.remove('border-green-500', 'bg-green-900/20');
            const radio = option.querySelector('input[type="radio"]');
            radio.checked = false;
        });

        // Select the correct package
        const targetOption = document.querySelector(`[data-package="${mappedPackage}"]`);
        if (targetOption) {
            targetOption.classList.add('border-green-500', 'bg-green-900/20');
            const radio = targetOption.querySelector('input[type="radio"]');
            radio.checked = true;
        }

        updateOrderSummary();
        updatePackageFeatures();
    }
}



// Update user counter
function updateSpotsLeft() {
    // Counter animation for active users
    const counters = document.querySelectorAll('.counter');
    counters.forEach(counter => {
        const target = parseInt(counter.getAttribute('data-target'));
        if (target === 500) {
            // Occasionally increment user count
            setInterval(() => {
                if (Math.random() < 0.1) {
                    const current = parseInt(counter.textContent);
                    if (current < target + 50) {
                        counter.textContent = current + 1;
                    }
                }
            }, 60000);
        }
    });
}

// Animate counters
function animateCounters() {
    const counters = document.querySelectorAll('.counter');

    counters.forEach(counter => {
        const target = parseInt(counter.getAttribute('data-target'));
        let count = 0;
        const increment = target / 100;

        const updateCounter = () => {
            if (count < target) {
                count += increment;
                counter.textContent = Math.ceil(count);
                setTimeout(updateCounter, 20);
            } else {
                counter.textContent = target;
            }
        };

        updateCounter();
    });
}

// Package selection
function setupPackageSelection() {
    const packageOptions = document.querySelectorAll('.package-option');

    packageOptions.forEach(option => {
        option.addEventListener('click', function() {
            // Remove previous selection
            packageOptions.forEach(opt => opt.classList.remove('border-green-500', 'bg-green-900/20'));

            // Add selection to clicked option
            this.classList.add('border-green-500', 'bg-green-900/20');

            // Update radio button
            const radio = this.querySelector('input[type="radio"]');
            radio.checked = true;

            // Update selected package
            selectedPackage = this.getAttribute('data-package');
            updateOrderSummary();
            updatePackageFeatures();
        });
    });
}

// Update order summary
function updateOrderSummary() {
    const pkg = packages[selectedPackage];
    document.getElementById('selectedPackage').textContent = pkg.name;
}

// Update package features
function updatePackageFeatures() {
    const pkg = packages[selectedPackage];
    const featuresContainer = document.getElementById('package-features');

    featuresContainer.innerHTML = pkg.features.map(feature =>
        `<div class="flex items-center space-x-3">
            <i class="fas fa-check text-green-400"></i>
            <span>${feature}</span>
        </div>`
    ).join('');
}

// Form submission
function setupFormSubmission() {
    document.getElementById('preOrderForm').addEventListener('submit', async function(e) {
        e.preventDefault();

        const phoneNumber = document.getElementById('phoneNumber').value.trim();

        // Validate phone number format
        // Удаляем все символы кроме цифр
        const digitsOnly = phoneNumber.replace(/\D/g, '');

        if (digitsOnly.length < 8) {
            alert('Please enter a valid phone number (minimum 8 digits)');
            return;
        }

        const telegramValue = document.getElementById('telegram').value.trim();
        let tgNickname = null;
        if (telegramValue) {
            // Remove @ if present
            tgNickname = telegramValue.startsWith('@') ? telegramValue.substring(1) : telegramValue;
        }

        console.log('=== FORM SUBMISSION DEBUG ===');
        console.log('Selected package:', selectedPackage);
        console.log('Phone input value:', phoneNumber);
        console.log('Digits only:', digitsOnly);
        console.log('Email:', document.getElementById('email').value);
        console.log('Telegram nickname:', tgNickname);

        const formData = {
            selected_id: selectedPackage,
            number: digitsOnly,
            email: document.getElementById('email').value,
            TGNikName: tgNickname
        };

        console.log('Final form data:', JSON.stringify(formData, null, 2));

        // Show loading state
        const submitButton = document.querySelector('button[type="submit"]');
        const originalText = submitButton.innerHTML;
        submitButton.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Processing...';
        submitButton.disabled = true;

        try {
            const response = await fetch('/insert', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(formData)
            });

            if (response.ok) {
                const result = await response.text(); // Go возвращает "Data saved"
                // Meta Pixel CompleteRegistration event
                fbq('track', 'CompleteRegistration');
                showSuccessModal();
                
                // GTAG form submission event
                gtag('event', 'form_submission', {
                  'send_to': 'AW-17146158339/X9XFCN1z6o4YZKH9qOEp',
                  'event_callback': function() {
                    console.log('Form submitted event sent');
                  }
                });
                
                // Meta Pixel Lead event
                fbq('track', 'Lead', {
                  content_name: 'Form Submission'
                });
                
                // Meta Pixel Purchase event
                const userEmail = document.getElementById('email')?.value || '';
                fbq('track', 'Purchase', {
                  value: 14.99,
                  currency: 'USD',
                  content_name: 'Telegram Bot Subscription',
                  content_type: 'product',
                  email: userEmail
                });
                
                // Update user counter
                const counters = document.querySelectorAll('.counter');
                counters.forEach(counter => {
                    if (counter.getAttribute('data-target') === '500') {
                        const current = parseInt(counter.textContent);
                        counter.textContent = current + 1;
                    }
                });
            } else {
                // Получаем текст ошибки от бэкенда
                const errorText = await response.text();
                throw new Error(errorText || 'Pre-order failed');
            }
        } catch (error) {
            console.error('Error:', error);
            console.log('Form data sent:', formData); // Debug log
            alert(`❌ Error: ${error.message}`);
        } finally {
            // Reset button
            submitButton.innerHTML = originalText;
            submitButton.disabled = false;
        }
    });
}

// Success modal
function showSuccessModal() {
    document.getElementById('successModal').classList.remove('hidden');
    // Скрываем или показываем промокод в зависимости от выбранного пакета
    var promoSection = document.getElementById('promoSection');
    if (promoSection) {
        if (selectedPackage === 'Id3') {
            promoSection.style.display = '';
        } else {
            promoSection.style.display = 'none';
        }
    }
    // Динамически меняем ссылку на Telegram Bot и возвращаем теги аналитики
    var btn = document.getElementById('joinTelegramBtn');
    if (btn) {
        if (selectedPackage === 'Id1') {
            btn.onclick = function() {
                if (typeof gtag === 'function') {
                    gtag('event', 'click_start_free', {'send_to': 'AW-17146158339/U9vdCJZk6o4YZKH9qOEp'});
                }
                if (typeof fbq === 'function') {
                    fbq('track', 'InitiateCheckout', {button: 'TelegramBot'});
                }
                window.open('https://t.me/Axivion_bot', '_blank');
                closeSuccessModal();
            };
        } else if (selectedPackage === 'Id2') {
            btn.onclick = function() {
                if (typeof gtag === 'function') {
                    gtag('event', 'click_start_free', {'send_to': 'AW-17146158339/U9vdCJZk6o4YZKH9qOEp'});
                }
                if (typeof fbq === 'function') {
                    fbq('track', 'InitiateCheckout', {button: 'TelegramBot'});
                }
                window.open('https://t.me/Trade_Plus_Online_Bot', '_blank');
                closeSuccessModal();
            };
        } else if (selectedPackage === 'Id3') {
            btn.onclick = function() {
                if (typeof gtag === 'function') {
                    gtag('event', 'click_start_free', {'send_to': 'AW-17146158339/U9vdCJZk6o4YZKH9qOEp'});
                }
                if (typeof fbq === 'function') {
                    fbq('track', 'InitiateCheckout', {button: 'TelegramBot'});
                }
                window.open('https://t.me/TradePlusAI_Bot', '_blank');
                closeSuccessModal();
            };
        }
    }
}

function closeSuccessModal() {
    document.getElementById('successModal').classList.add('hidden');
    // Optionally redirect to thank you page
    // window.location.href = '/thank-you';
}

function openTelegramBot() {
    // Open Telegram bot in new tab
    window.open('https://t.me/axivion_bot', '_blank');
    // Close the modal
    closeSuccessModal();
}

// Popup functions
const popupTexts = {
    terms: `
TERMS OF SERVICE
Effective Date: January 2025 | Version: 1.0

1. Service Description
We provide digital products (PDF ebooks) and access to AI-powered Telegram bots. All payments are made in advance and are non-refundable unless a proven technical failure occurs, as determined solely by us. Our services are educational in nature and do not constitute financial advice.

2. Educational Content Disclaimer
All materials, signals, analyses, and bot outputs are provided solely for EDUCATIONAL AND INFORMATIONAL purposes. Nothing provided constitutes:
- Investment advice or recommendations
- Financial planning or portfolio management  
- Personalized trading strategies
- Guarantees of profit or performance

You acknowledge that:
- All trading involves substantial risk of loss
- Past performance does not guarantee future results
- You should consult qualified financial advisors before making investment decisions
- We do not know your financial situation, risk tolerance, or investment objectives

3. User Rights and Restrictions
You are granted a limited, non-exclusive, non-transferable license for personal use only. You may not:
- Reproduce, distribute, modify, or resell any content or services
- Share login credentials or access with third parties
- Use our services for commercial purposes without written permission
- Reverse engineer or attempt to extract our algorithms

4. Age and Eligibility Requirements
Our services are available only to individuals who are:
- 18 years of age or older
- Legally capable of entering binding contracts
- Not residents of restricted jurisdictions
- Able to understand and accept all trading risks

5. Geographic Restrictions
Our services are NOT available to residents of:
- United States (due to SEC regulations)
- United Kingdom (due to FCA restrictions)
- Any jurisdiction where such services are prohibited by local law

By using our services, you represent that you are not located in a restricted jurisdiction.

6. Telegram Bot Access
We do not guarantee continuous or uninterrupted access to the Telegram bot. Functionality may be affected by external platform limitations or technical maintenance. Usage of the bot is subject to Telegram Inc.'s terms of service and policies.

7. Trading Risk Warnings
TRADING CARRIES HIGH RISK. You may lose all invested capital. Specific risks include:
- Market volatility and unpredictable price movements
- Technical failures and platform outages
- Slippage and execution delays
- Leverage amplifying both gains and losses
- Economic and geopolitical events affecting markets

Only trade with money you can afford to lose completely.

8. No Investment Advisory Relationship
No advisory, fiduciary, or professional relationship is created between us and you. We do not:
- Provide personalized investment advice
- Act as your investment advisor or broker
- Have knowledge of your financial circumstances
- Recommend specific securities or trading strategies

9. Limitation of Liability
We are not responsible for:
- Any trading losses or missed profits
- Decisions made based on our educational content
- Third-party platform failures (Telegram, exchanges, brokers)
- Market movements or economic events
- Technical analysis interpretations
- Timing of signal delivery or execution
- Currency fluctuations or market volatility

MAXIMUM LIABILITY: Our total liability shall never exceed the amount you paid for our services in the 12 months preceding any claim.

All content is provided "as is" without warranties of any kind, either express or implied.

10. Force Majeure
We are not liable for delays or failures due to:
- Telegram platform changes or outages
- Internet connectivity issues
- Government regulations or restrictions
- Market closures or extraordinary market conditions
- Acts of God, natural disasters, or other unforeseeable events

11. Intellectual Property
All content, including trading algorithms, educational materials, bot software, and analysis, remains our exclusive intellectual property. Unauthorized distribution, reverse engineering, or commercial use is strictly prohibited.

12. Dispute Resolution
Before initiating legal proceedings, you agree to contact our support team to resolve issues amicably. All disputes shall be governed by the jurisdiction of the state in which our company is registered.

13. Changes to Terms
We reserve the right to update these terms at any time without prior notice. Continued use of our services constitutes your acceptance of the modified terms.

14. Final Acknowledgment
By proceeding with payment, you confirm that you:
- Are 18+ years old and legally eligible
- Are not located in a restricted jurisdiction
- Understand all trading risks and disclaimers
- Will not hold us liable for any trading losses
- Acknowledge this is educational content only
- Have read all terms, privacy policy, and disclaimers
- Accept all purchases are final with no refunds except technical failures
- Assume full responsibility for any actions or decisions made based on our content
`,

    privacy: `
PRIVACY POLICY
Effective Date: January 2025 | Version: 1.0

Information We Collect
We may collect the following information:
- Contact information (name, email address)
- Payment information (processed securely through third-party processors)
- Telegram user ID and interaction data
- Usage analytics and service improvement data
- IP address and browser information

How We Use Your Information
Your information is used solely to:
- Process orders and deliver digital products
- Provide access to Telegram bot services
- Send service-related communications
- Improve our services and user experience
- Comply with legal obligations

What We Do NOT Do
We do NOT:
- Sell or share your data with third parties for marketing purposes
- Collect more data than necessary for our services
- Store your data longer than required for business or legal reasons
- Access your personal trading accounts or financial information
- Share your information with unauthorized parties

Telegram Bot Data
Our Telegram bot may collect:
- User ID and interaction timestamps
- Message frequency and usage patterns
- Service preferences and settings

We do NOT store:
- Personal financial information
- Trading account details
- Payment information beyond transaction confirmation
- Private conversations or personal messages

Data Security
We implement appropriate security measures to protect your information against unauthorized access, alteration, disclosure, or destruction. However, no internet transmission is 100% secure.

Data Retention
We retain your information only as long as necessary to:
- Provide our services
- Comply with legal obligations
- Resolve disputes
- Enforce our agreements

Your Rights
You have the right to:
- Request access to your personal data
- Request correction of inaccurate data
- Request deletion of your data (subject to legal requirements)
- Withdraw consent for data processing
- Lodge a complaint with supervisory authorities

Third-Party Services
Our services may integrate with third-party platforms (Telegram, payment processors). These services have their own privacy policies, which we encourage you to review.

International Data Transfers
Your information may be transferred to and processed in countries other than your residence. We ensure appropriate safeguards are in place for such transfers.

Children's Privacy
Our services are not intended for individuals under 18. We do not knowingly collect personal information from children under 18.

Contact Information
For privacy-related questions or requests, please contact us through our official channels.

Changes to Privacy Policy
We may update this policy periodically. Continued use of our services after changes constitutes acceptance of the updated policy.
`,

    disclaimer: `
DISCLAIMER
Effective Date: January 2025 | Version: 1.0

Educational Purpose Only
All materials provided through our PDF guides, Telegram bots, and website are for INFORMATIONAL AND EDUCATIONAL purposes only. They do NOT constitute:
- Financial, investment, or trading advice
- Personalized recommendations
- Professional consultation
- Guaranteed trading strategies
- Medical or legal advice

No Professional Relationship
We are NOT:
- Licensed financial advisors or investment professionals
- Registered investment advisors (RIA)
- Broker-dealers or financial planners
- Healthcare or legal professionals
- Your fiduciary or agent

No Guarantees or Warranties
We make NO guarantees regarding:
- Profitability or investment returns
- Accuracy of market analysis or predictions
- Performance of trading strategies or signals
- Uninterrupted service availability
- Specific outcomes or results

High-Risk Warning
Trading and investing involve SUBSTANTIAL RISK, including:
- Complete loss of invested capital
- Leveraged trading amplifying losses
- Market volatility and unpredictable movements
- Technical failures and system outages
- Regulatory changes affecting markets

Past Performance Disclaimer
- Past performance does not guarantee future results
- Simulated or hypothetical results have inherent limitations
- Actual trading results may differ significantly
- Market conditions change and strategies may become ineffective

Personal Responsibility
You are SOLELY responsible for:
- All trading and investment decisions
- Conducting your own due diligence
- Understanding risks before trading
- Consulting qualified professionals
- Complying with applicable laws and regulations
- Managing your risk tolerance and capital

Market Data and Analysis
- All market data is provided for educational purposes
- Analysis reflects opinions, not facts
- Market conditions can change rapidly
- Technical analysis is subjective and may be incorrect
- Economic events can invalidate analysis

Technology Limitations
Our services may experience:
- Technical glitches or system failures
- Delays in signal delivery
- Internet connectivity issues
- Third-party platform dependencies
- Software bugs or errors

Regulatory Compliance
- Ensure compliance with your local financial regulations
- Some services may not be available in your jurisdiction
- Consult local authorities regarding trading restrictions
- We are not responsible for regulatory violations

Independent Decision Making
- All decisions based on our content are your own
- We do not provide personalized advice
- Consider your financial situation before acting
- Seek professional advice when needed

No Liability
You acknowledge and agree that:
- Use of our services is entirely at your own risk
- You waive any legal claims against our business, team, or platform
- We are not liable for any direct, indirect, or consequential damages
- Our maximum liability is limited to the amount you paid for services

Force Majeure
We are not responsible for circumstances beyond our control, including:
- Natural disasters or acts of God
- Government actions or regulations
- Internet or technology failures
- Market closures or suspensions

Contact and Questions
If you do not understand or agree with any part of this disclaimer, do not use our services. Contact us for clarification before proceeding.

Acceptance
By using our services, you acknowledge that you have read, understood, and accepted this disclaimer in its entirety.
`
};

function openPopup(type) {
    const popup = document.getElementById('popup');
    const title = document.getElementById('popup-title');
    const content = document.getElementById('popup-content');

    title.textContent = type.charAt(0).toUpperCase() + type.slice(1) + ' & Conditions';
    content.textContent = popupTexts[type];

    popup.classList.remove('hidden');
}

function closePopup() {
    document.getElementById('popup').classList.add('hidden');
}

// Close modals when clicking outside
document.getElementById('successModal').addEventListener('click', function(e) {
    if (e.target === this) {
        closeSuccessModal();
    }
});

document.getElementById('popup').addEventListener('click', function(e) {
    if (e.target === this) {
        closePopup();
    }
});

// Email validation logic
function isValidEmail(email) {
    // Basic RFC 5322 compliant regex
    const re = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
    if (!re.test(email)) return false;
    // Block obviously fake domains (add more as needed)
    const fakeDomains = [
        'mailinator.com', 'yopmail.com', 'guerrillamail.com', '10minutemail.com',
        'tempmail.com', 'fakeinbox.com', 'trashmail.com', 'dispostable.com',
        'example.com', 'test.com', 'email.com', 'qq.com', 'myemail.com'
    ];
    const domain = email.split('@')[1]?.toLowerCase();
    if (fakeDomains.includes(domain)) return false;
    return true;
}

function validateEmail(email) {
    const input = document.getElementById('email');
    const icon = document.getElementById('emailValidationIcon');
    const successIcon = document.getElementById('emailSuccessIcon');
    const errorIcon = document.getElementById('emailErrorIcon');
    const message = document.getElementById('emailValidationMessage');
    icon.classList.remove('hidden');
    if (isValidEmail(email)) {
        input.classList.remove('error');
        input.classList.add('success');
        successIcon.style.display = 'inline';
        errorIcon.style.display = 'none';
        message.textContent = 'Email looks good!';
        message.className = 'success-message';
        return true;
    } else {
        input.classList.remove('success');
        input.classList.add('error');
        successIcon.style.display = 'none';
        errorIcon.style.display = 'inline';
        message.textContent = 'Please enter a real, valid email address.';
        message.className = 'error-message';
        return false;
    }
}

function validateEmailRealTime(email) {
    if (email.length === 0) {
        document.getElementById('emailValidationIcon').classList.add('hidden');
        document.getElementById('emailValidationMessage').textContent = '';
        document.getElementById('email').classList.remove('error', 'success');
        return;
    }
    validateEmail(email);
}

// Prevent form submission if email is invalid
const preOrderForm = document.getElementById('preOrderForm');
if (preOrderForm) {
    preOrderForm.addEventListener('submit', function(e) {
        const email = document.getElementById('email').value;
        if (!validateEmail(email)) {
            e.preventDefault();
            document.getElementById('email').focus();
        }
    });
}

// Phone validation logic
function isValidPhone(phone) {
    // Basic regex for phone number format
    const re = /^\+?\d{8,15}$/;
    if (!re.test(phone)) return false;
    // Block obviously fake numbers (add more as needed)
    const fakeNumbers = [
        '1234567890', '0123456789', '00123456789', '000123456789',
        '1111111111', '2222222222', '3333333333', '4444444444',
        '5555555555', '6666666666', '7777777777', '8888888888',
        '9999999999'
    ];
    const cleanedPhone = phone.replace(/\D/g, '');
    if (fakeNumbers.includes(cleanedPhone)) return false;
    return true;
}

function validatePhone(phone) {
    const input = document.getElementById('phoneNumber');
    const icon = document.getElementById('phoneValidationIcon');
    const successIcon = document.getElementById('phoneSuccessIcon');
    const errorIcon = document.getElementById('phoneErrorIcon');
    const message = document.getElementById('phoneValidationMessage');
    icon.classList.remove('hidden');
    if (isValidPhone(phone)) {
        input.classList.remove('error');
        input.classList.add('success');
        successIcon.style.display = 'inline';
        errorIcon.style.display = 'none';
        message.textContent = 'Phone number looks good!';
        message.className = 'success-message';
        return true;
    } else {
        input.classList.remove('success');
        input.classList.add('error');
        successIcon.style.display = 'none';
        errorIcon.style.display = 'inline';
        message.textContent = 'Please enter a valid phone number (8-15 digits, including country code).';
        message.className = 'error-message';
        return false;
    }
}

function validatePhoneRealTime(phone) {
    if (phone.length === 0) {
        document.getElementById('phoneValidationIcon').classList.add('hidden');
        document.getElementById('phoneValidationMessage').textContent = '';
        document.getElementById('phoneNumber').classList.remove('error', 'success');
        return;
    }
    validatePhone(phone);
}

// Prevent form submission if phone is invalid
const preOrderFormPhone = document.getElementById('preOrderForm');
if (preOrderFormPhone) {
    preOrderFormPhone.addEventListener('submit', function(e) {
        const phone = document.getElementById('phoneNumber').value;
        if (!validatePhone(phone)) {
            e.preventDefault();
            document.getElementById('phoneNumber').focus();
        }
    });
}

// Countdown Timer Functionality
function initializeCountdown() {
    // Get stored end time or set new one (24 hours from now)
    let endTime = localStorage.getItem('countdownEndTime');
    
    if (!endTime) {
        // Set countdown to 24 hours from now
        const now = new Date();
        endTime = now.getTime() + (24 * 60 * 60 * 1000); // 24 hours in milliseconds
        localStorage.setItem('countdownEndTime', endTime);
    }
    
    function updateCountdown() {
        const now = new Date().getTime();
        const distance = endTime - now;
        
        if (distance < 0) {
            // Countdown expired - reset for next session
            localStorage.removeItem('countdownEndTime');
            document.getElementById('mainCountdown').innerHTML = 'EXPIRED';
            document.querySelector('.bg-gradient-to-r.from-blue-700.via-blue-500.to-blue-700').classList.add('animate-pulse');
            return;
        }
        
        // Calculate hours, minutes, seconds
        const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);
        
        // Display countdown
        document.getElementById('mainCountdown').innerHTML = 
            `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        
        // Add urgency effects when time is running low
        if (distance < 3600000) { // Less than 1 hour
            document.getElementById('mainCountdown').classList.add('animate-pulse', 'text-red-300');
        } else if (distance < 7200000) { // Less than 2 hours
            document.getElementById('mainCountdown').classList.add('text-orange-300');
        }
    }
    
    // Update countdown every second
    updateCountdown();
    setInterval(updateCountdown, 1000);
}

// Promo code copy logic
function setupPromoCopy() {
    const btn = document.getElementById('copyPromoBtn');
    const code = document.getElementById('promoCode');
    const icon = document.getElementById('copyIcon');
    const tooltip = document.getElementById('copyTooltip');
    if (!btn || !code || !icon || !tooltip) return;
    btn.onclick = function() {
        navigator.clipboard.writeText(code.textContent).then(() => {
            icon.className = 'fas fa-check text-green-400';
            tooltip.classList.remove('hidden');
            setTimeout(() => {
                icon.className = 'fas fa-copy text-yellow-300';
                tooltip.classList.add('hidden');
            }, 1500);
        });
    };
}

function handleAccessClick() {
    var terms = document.getElementById('terms');
    var error = document.getElementById('termsError');
    if (!terms.checked) {
        error.classList.remove('hidden');
        return;
    } else {
        error.classList.add('hidden');
        showSuccessModal();
    }
}
</script>

</body>
</html>